p8105\_hw6\_yf2563
================
Yatong Feng
12/7/2020

``` r
library(tidyverse)

knitr::opts_chunk$set(
  message = F,
  warning = F
)
theme_set(theme_minimal() + theme(legend.position = "bottom"))
options(
  ggplot2.continuous.colour = "viridis",
  ggplot2.continuous.fill = "viridis"
)
scale_colour_discrete = scale_color_viridis_d
scale_fill_discrete = scale_fill_viridis_d
```

## Problem 1

The Washington Post has gathered data on homicides in 50 large U.S.
cities.

  - Create a city\_state variable (e.g. “Baltimore, MD”)
  - binary variable indicating whether the homicide is solved.
  - Omit cities Dallas, TX; Phoenix, AZ; and Kansas City, MO – these
    don’t report victim race.
  - omit Tulsa, AL – this is a data entry mistake.
  - For this problem, limit your analysis those for whom victim\_race is
    white or black.
  - Be sure that victim\_age is numeric.

<!-- end list -->

``` r
homicide_df = 
  read_csv("data/homicide-data.csv", na = c("", "NA", "Unknown")) %>% 
  mutate(
    city_state = str_c(city, state, sep = ", "),
    victim_age = as.numeric(victim_age),
    resolution = case_when(
      disposition == "Closed without arrest" ~ 0,
      disposition == "Open/No arrest"        ~ 0,
      disposition == "Closed by arrest"      ~ 1)
  ) %>% 
  filter(
    victim_race %in% c("White", "Black"),
    city_state != "Tulsa, AL") %>% 
  select(city_state, resolution, victim_age, victim_race, victim_sex)

head(homicide_df)
```

    ## # A tibble: 6 x 5
    ##   city_state      resolution victim_age victim_race victim_sex
    ##   <chr>                <dbl>      <dbl> <chr>       <chr>     
    ## 1 Albuquerque, NM          0         15 White       Female    
    ## 2 Albuquerque, NM          0         72 White       Female    
    ## 3 Albuquerque, NM          0         91 White       Female    
    ## 4 Albuquerque, NM          0         56 White       Male      
    ## 5 Albuquerque, NM          0         NA White       Male      
    ## 6 Albuquerque, NM          1         43 White       Female
